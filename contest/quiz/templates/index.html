{% extends "base.html" %}
{% load my_humanize %}
{% load humanize %}
{% block title %}
  首页
{% endblock title %}
{% block pagename %}
  首页
{% endblock pagename %}
{% block content %}
  {% if user.is_authenticated %}
    {# todo: Status #}
    <section class="prose">
      <h2>竞赛简介</h2>
      <p class="indent-8">
        国防知识竞赛线上赛由系统随机抽取{{ constants.N_QUESTIONS_PER_RESPONSE }}道题，限时{{ constants.DEADLINE_DURATION | natural_delta }}。每人限答{{ constants.MAX_TRIES }}次。<span class="text-red-700 font-bold">由于网络原因，请尽量在时间截止前手动交卷，并推荐使用电脑端进行作答。</span>希望同学们掌握好答题时间，并做好充分的答题准备，预祝同学们考个好成绩！
      </p>
    </section>
    <div class="m-4 text-center">
      <a href="{% url 'quiz:contest' %}"
         class="text-lg px-4 py-2 bg-red-700 text-white shadow rounded-full hover:bg-red-500">
        <!-- https://heroicons.com/ arrow-left-on-rectangle -->
        <svg class="h-6 w-6 inline"
             xmlns="http://www.w3.org/2000/svg"
             fill="none"
             viewBox="0 0 24 24"
             stroke-width="1.5"
             stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
        </svg>
        前往答题
      </a>
    </div>
    <section class="prose">
      <h2>当前成绩</h2>
      <table>
        <thead>
          <tr>
            <th>提交时刻</th>
            <th>得分</th>
          </tr>
        </thead>
        <tbody>
          {% for r in user.student.response_set.all|dictsortreversed:"submit_at" %}
            <tr>
              <td>{{ r.submit_at }}（{{ r.submit_at | naturaltime }}）</td>
              <td>{{ r.score | as_score }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </section>
  {% else %}
    <p>
      请先<a href="{% url 'login' %}">登录</a>。
    </p>
  {% endif %}
{% endblock content %}
